From 31fa5110f9ecc47c37cf6fa09ef4a63db9b86529 Mon Sep 17 00:00:00 2001
From: Ikey Doherty <michael.i.doherty@intel.com>
Date: Tue, 2 May 2017 17:07:02 +0100
Subject: [PATCH] pages: Use the stateless os-release file (vendor) only

Signed-off-by: Ikey Doherty <michael.i.doherty@intel.com>
---
 gnome-initial-setup/pages/language/gis-language-page.c | 2 +-
 gnome-initial-setup/pages/privacy/gis-privacy-page.c   | 2 +-
 gnome-initial-setup/pages/software/gis-software-page.c | 2 +-
 gnome-initial-setup/pages/summary/gis-summary-page.c   | 2 +-
 4 files changed, 4 insertions(+), 4 deletions(-)

diff --git a/gnome-initial-setup/pages/language/gis-language-page.c b/gnome-initial-setup/pages/language/gis-language-page.c
index 3c807f8..8826172 100644
--- a/gnome-initial-setup/pages/language/gis-language-page.c
+++ b/gnome-initial-setup/pages/language/gis-language-page.c
@@ -225,7 +225,7 @@ update_distro_logo (GisLanguagePage *page)
 
   id = NULL;
 
-  if (g_file_get_contents ("/etc/os-release", &buffer, NULL, NULL))
+  if (g_file_get_contents ("/usr/lib/os-release", &buffer, NULL, NULL))
     {
       id = get_item (buffer, "ID");
       g_free (buffer);
diff --git a/gnome-initial-setup/pages/privacy/gis-privacy-page.c b/gnome-initial-setup/pages/privacy/gis-privacy-page.c
index 5abfb83..3247b9a 100644
--- a/gnome-initial-setup/pages/privacy/gis-privacy-page.c
+++ b/gnome-initial-setup/pages/privacy/gis-privacy-page.c
@@ -93,7 +93,7 @@ update_os_data (GisPrivacyPage *page)
   name = NULL;
   privacy_policy = NULL;
 
-  if (g_file_get_contents ("/etc/os-release", &buffer, NULL, NULL))
+  if (g_file_get_contents ("/usr/lib/os-release", &buffer, NULL, NULL))
     {
       name = get_item (buffer, "NAME");
       privacy_policy = get_item (buffer, "PRIVACY_POLICY_URL");
diff --git a/gnome-initial-setup/pages/software/gis-software-page.c b/gnome-initial-setup/pages/software/gis-software-page.c
index 8e93dda..93ee505 100644
--- a/gnome-initial-setup/pages/software/gis-software-page.c
+++ b/gnome-initial-setup/pages/software/gis-software-page.c
@@ -96,7 +96,7 @@ update_distro_name (GisSoftwarePage *page)
 
   name = NULL;
 
-  if (g_file_get_contents ("/etc/os-release", &buffer, NULL, NULL))
+  if (g_file_get_contents ("/usr/lib/os-release", &buffer, NULL, NULL))
     {
       name = get_item (buffer, "NAME");
       g_free (buffer);
diff --git a/gnome-initial-setup/pages/summary/gis-summary-page.c b/gnome-initial-setup/pages/summary/gis-summary-page.c
index 1c624d7..fd0361d 100644
--- a/gnome-initial-setup/pages/summary/gis-summary-page.c
+++ b/gnome-initial-setup/pages/summary/gis-summary-page.c
@@ -289,7 +289,7 @@ update_distro_name (GisSummaryPage *page)
 
   name = NULL;
 
-  if (g_file_get_contents ("/etc/os-release", &buffer, NULL, NULL))
+  if (g_file_get_contents ("/usr/lib/os-release", &buffer, NULL, NULL))
     {
       name = get_item (buffer, "NAME");
       g_free (buffer);
-- 
2.12.2

